CREATE TABLE add_services(id SERIAL NOT NULL PRIMARY KEY, services VARCHAR(100) NULL, services_allowance DECIMAL(5,2) NOT NULL CHECK  (services_allowance>=50 AND services_allowance<=100),   food VARCHAR(200) NULL,    food_allowance DECIMAL(5,2) NOT NULL CHECK        (food_allowance>=10 AND food_allowance<=100),    entertainments VARCHAR(200) NULL,    entertainments_allowance DECIMAL(5,2) NOT NULL CHECK        (entertainments_allowance>=10 AND entertainments_allowance<=400));
CREATE TABLE buildings(id SERIAL NOT NULL PRIMARY KEY,    stars_number INT NOT NULL CHECK        (stars_number <= 5 AND stars_number >=1 ),    floors_number INT NOT NULL CHECK        (floors_number>0 AND floors_number<150),    rooms_number INT NOT NULL CHECK        (rooms_number>=50 AND rooms_number<30000),    rooms_per_floor_number INT NOT NULL CHECK        (rooms_per_floor_number>0 AND rooms_per_floor_number<200),    building_min_price DECIMAL(7,2) NOT NULL CHECK        (building_min_price>100 AND building_min_price<=10000),    id_add_services INT NOT NULL REFERENCES add_services ON DELETE CASCADE);
CREATE TABLE room_types(    id SERIAL NOT NULL PRIMARY KEY,    floor INT NOT NULL CHECK        (floor>0 AND floor<150),    people_number INT NOT NULL CHECK        (people_number>0 AND people_number<6),    service_cost_per_day DECIMAL(5,2) NOT NULL CHECK        (service_cost_per_day>=50 AND service_cost_per_day<=300),    min_price DECIMAL(5,2) NOT NULL CHECK        (min_price>=30 AND min_price<=500));
CREATE TABLE rooms(    id SERIAL NOT NULL PRIMARY KEY,    id_building INT NOT NULL REFERENCES buildings ON DELETE CASCADE,    id_room_types INT NOT NULL REFERENCES room_types ON DELETE CASCADE);
CREATE TABLE partners(    contract_number SERIAL NOT NULL PRIMARY KEY,    information VARCHAR(400) NULL,    cooperation_date_start DATE NOT NULL,    cooperation_date_end DATE NOT NULL CHECK        (cooperation_date_end>cooperation_date_start));
CREATE TABLE reservations(    id SERIAL NOT NULL PRIMARY KEY,    res_partner INT NOT NULL REFERENCES partners ON DELETE CASCADE,    stars_number INT NOT NULL CHECK        (stars_number <= 5 AND stars_number >=1 ),    floor_number INT NOT NULL CHECK        (floor_number>0 AND floor_number<150),    res_date_start DATE NOT NULL,    res_date_end DATE NOT NULL CHECK        (res_date_end>res_date_start),    discount int NOT NULL CHECK        (discount>=0 AND discount<=100));
CREATE TABLE res_rooms(    id_room INT NOT NULL REFERENCES rooms ON DELETE CASCADE,    id_reservation INT NOT NULL REFERENCES reservations ON DELETE CASCADE,    PRIMARY KEY (id_room, id_reservation));
CREATE TABLE clients(    id SERIAL NOT NULL PRIMARY KEY,    fio VARCHAR(100) NOT NULL,    phone_number VARCHAR(15) NOT NULL);
CREATE TABLE res_clients(    id_client INT NOT NULL REFERENCES clients ON DELETE CASCADE,    id_reservation INT NOT NULL REFERENCES reservations ON DELETE CASCADE,    PRIMARY KEY (id_client, id_reservation));
CREATE TABLE reviews(    id_client INT NOT NULL REFERENCES clients ON DELETE CASCADE,    id_room INT NOT NULL REFERENCES rooms ON DELETE CASCADE,    mark INT NOT NULL CHECK        (mark>0 AND mark<6),    review VARCHAR(500) NULL,    PRIMARY KEY (id_client, id_room));
CREATE TABLE contracts(    contract_number SERIAL NOT NULL PRIMARY KEY,    id_client INT NOT NULL REFERENCES clients ON DELETE CASCADE,    id_room INT NOT NULL REFERENCES rooms ON DELETE CASCADE,    living_start DATE NOT NULL,    living_end DATE NOT NULL CHECK        (living_end>living_start),    id_reservation INT NULL REFERENCES reservations ON DELETE CASCADE);
CREATE TABLE bills(    bill_number SERIAL NOT NULL PRIMARY KEY,    id_contract INT NOT NULL REFERENCES contracts ON DELETE CASCADE,    bill DECIMAL(10,2) NOT NULL);
CREATE TABLE added_services(    id SERIAL NOT NULL,    bill_number INT NOT NULL REFERENCES bills ON DELETE CASCADE,    add_service VARCHAR(100) NOT NULL,    service_bill DECIMAL(5,2) NOT NULL,    PRIMARY KEY (id, bill_number));
